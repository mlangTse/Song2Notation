{"ast":null,"code":"import React,{useState}from\"react\";import{processAudio}from\"../services/api\";import NotationViewer from\"./NotationViewer\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function FileUploader(){const[file,setFile]=useState(null);const[uploadProgress,setUploadProgress]=useState(0);const[musicXmlPath,setMusicXmlPath]=useState(\"\");const[loading,setLoading]=useState(false);const handleFileChange=event=>{setFile(event.target.files[0]);};const handleUpload=async()=>{if(!file){alert(\"Please upload a file first!\");return;}const formData=new FormData();formData.append(\"file\",file);setLoading(true);setUploadProgress(0);try{const response=await processAudio(formData,setUploadProgress);setMusicXmlPath(response.musicxml_path);}catch(error){console.error(\"Error processing audio:\",error);alert(\"Failed to process the file. Please try again.\");}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"20px\",maxWidth:\"600px\",margin:\"0 auto\"},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Upload Your Song\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"audio/*\",onChange:handleFileChange}),/*#__PURE__*/_jsx(\"button\",{onClick:handleUpload,disabled:loading,children:loading?\"Uploading...\":\"Upload and Generate\"}),uploadProgress>0&&/*#__PURE__*/_jsx(\"div\",{style:{margin:\"20px 0\",width:\"100%\",background:\"#f3f3f3\"},children:/*#__PURE__*/_jsx(\"div\",{style:{width:`${uploadProgress}%`,height:\"10px\",background:\"#4caf50\",transition:\"width 0.2s\"}})}),musicXmlPath&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Generated Musical Notation:\"}),/*#__PURE__*/_jsx(NotationViewer,{musicXmlPath:musicXmlPath})]})]});}export default FileUploader;","map":{"version":3,"names":["React","useState","processAudio","NotationViewer","jsx","_jsx","jsxs","_jsxs","FileUploader","file","setFile","uploadProgress","setUploadProgress","musicXmlPath","setMusicXmlPath","loading","setLoading","handleFileChange","event","target","files","handleUpload","alert","formData","FormData","append","response","musicxml_path","error","console","style","padding","maxWidth","margin","children","type","accept","onChange","onClick","disabled","width","background","height","transition"],"sources":["/Users/lang/Documents/code/Song2Notation/frontend/src/components/FileUploader.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { processAudio } from \"../services/api\";\nimport NotationViewer from \"./NotationViewer\";\n\nfunction FileUploader() {\n  const [file, setFile] = useState(null);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [musicXmlPath, setMusicXmlPath] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  const handleFileChange = (event) => {\n    setFile(event.target.files[0]);\n  };\n\n  const handleUpload = async () => {\n    if (!file) {\n      alert(\"Please upload a file first!\");\n      return;\n    }\n\n    const formData = new FormData();\n    formData.append(\"file\", file);\n\n    setLoading(true);\n    setUploadProgress(0);\n\n    try {\n      const response = await processAudio(formData, setUploadProgress);\n      setMusicXmlPath(response.musicxml_path);\n    } catch (error) {\n      console.error(\"Error processing audio:\", error);\n      alert(\"Failed to process the file. Please try again.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div style={{ padding: \"20px\", maxWidth: \"600px\", margin: \"0 auto\" }}>\n      <h2>Upload Your Song</h2>\n      <input type=\"file\" accept=\"audio/*\" onChange={handleFileChange} />\n      <button onClick={handleUpload} disabled={loading}>\n        {loading ? \"Uploading...\" : \"Upload and Generate\"}\n      </button>\n      {uploadProgress > 0 && (\n        <div style={{ margin: \"20px 0\", width: \"100%\", background: \"#f3f3f3\" }}>\n          <div\n            style={{\n              width: `${uploadProgress}%`,\n              height: \"10px\",\n              background: \"#4caf50\",\n              transition: \"width 0.2s\",\n            }}\n          />\n        </div>\n      )}\n      {musicXmlPath && (\n        <div>\n          <h3>Generated Musical Notation:</h3>\n          <NotationViewer musicXmlPath={musicXmlPath} />\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default FileUploader;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,YAAY,KAAQ,iBAAiB,CAC9C,MAAO,CAAAC,cAAc,KAAM,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE9C,QAAS,CAAAC,YAAYA,CAAA,CAAG,CACtB,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGT,QAAQ,CAAC,IAAI,CAAC,CACtC,KAAM,CAACU,cAAc,CAAEC,iBAAiB,CAAC,CAAGX,QAAQ,CAAC,CAAC,CAAC,CACvD,KAAM,CAACY,YAAY,CAAEC,eAAe,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CACpD,KAAM,CAACc,OAAO,CAAEC,UAAU,CAAC,CAAGf,QAAQ,CAAC,KAAK,CAAC,CAE7C,KAAM,CAAAgB,gBAAgB,CAAIC,KAAK,EAAK,CAClCR,OAAO,CAACQ,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC,CAChC,CAAC,CAED,KAAM,CAAAC,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CAACZ,IAAI,CAAE,CACTa,KAAK,CAAC,6BAA6B,CAAC,CACpC,OACF,CAEA,KAAM,CAAAC,QAAQ,CAAG,GAAI,CAAAC,QAAQ,CAAC,CAAC,CAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,CAAEhB,IAAI,CAAC,CAE7BO,UAAU,CAAC,IAAI,CAAC,CAChBJ,iBAAiB,CAAC,CAAC,CAAC,CAEpB,GAAI,CACF,KAAM,CAAAc,QAAQ,CAAG,KAAM,CAAAxB,YAAY,CAACqB,QAAQ,CAAEX,iBAAiB,CAAC,CAChEE,eAAe,CAACY,QAAQ,CAACC,aAAa,CAAC,CACzC,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,yBAAyB,CAAEA,KAAK,CAAC,CAC/CN,KAAK,CAAC,+CAA+C,CAAC,CACxD,CAAC,OAAS,CACRN,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,mBACET,KAAA,QAAKuB,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEC,QAAQ,CAAE,OAAO,CAAEC,MAAM,CAAE,QAAS,CAAE,CAAAC,QAAA,eACnE7B,IAAA,OAAA6B,QAAA,CAAI,kBAAgB,CAAI,CAAC,cACzB7B,IAAA,UAAO8B,IAAI,CAAC,MAAM,CAACC,MAAM,CAAC,SAAS,CAACC,QAAQ,CAAEpB,gBAAiB,CAAE,CAAC,cAClEZ,IAAA,WAAQiC,OAAO,CAAEjB,YAAa,CAACkB,QAAQ,CAAExB,OAAQ,CAAAmB,QAAA,CAC9CnB,OAAO,CAAG,cAAc,CAAG,qBAAqB,CAC3C,CAAC,CACRJ,cAAc,CAAG,CAAC,eACjBN,IAAA,QAAKyB,KAAK,CAAE,CAAEG,MAAM,CAAE,QAAQ,CAAEO,KAAK,CAAE,MAAM,CAAEC,UAAU,CAAE,SAAU,CAAE,CAAAP,QAAA,cACrE7B,IAAA,QACEyB,KAAK,CAAE,CACLU,KAAK,CAAE,GAAG7B,cAAc,GAAG,CAC3B+B,MAAM,CAAE,MAAM,CACdD,UAAU,CAAE,SAAS,CACrBE,UAAU,CAAE,YACd,CAAE,CACH,CAAC,CACC,CACN,CACA9B,YAAY,eACXN,KAAA,QAAA2B,QAAA,eACE7B,IAAA,OAAA6B,QAAA,CAAI,6BAA2B,CAAI,CAAC,cACpC7B,IAAA,CAACF,cAAc,EAACU,YAAY,CAAEA,YAAa,CAAE,CAAC,EAC3C,CACN,EACE,CAAC,CAEV,CAEA,cAAe,CAAAL,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}